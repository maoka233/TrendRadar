# TrendRadar 功能调整实施说明

## 需求概述

根据问题描述，需要对TrendRadar进行以下调整：

1. **仅关注微博、贴吧、知乎、bilibili的热点话题和评论**
2. **话题关键词为：ai、新能源汽车、GPT、Claude、deepseek、手机、芯片**
3. **热点评论提取**：针对每个热点话题，提取具有代表性的5-10条高赞评论
4. **内容整理呈现**：将搜集到的热点话题和评论进行分类整理，以清晰的结构呈现

## 已实施的更改

### ✅ 1. 平台配置调整 (已完成)

**文件**: `config/config.yaml`

已将监控平台从11个精简为4个：
- 微博 (weibo)
- 贴吧 (tieba)
- 知乎 (zhihu)
- bilibili 热搜 (bilibili-hot-search)

### ✅ 2. 关键词配置调整 (已完成)

**文件**: `config/frequency_words.txt`

已更新为7个关键词组，覆盖所需的所有话题：

1. **AI相关** (3个词)
   - ai
   - AI
   - 人工智能

2. **GPT相关** (3个词)
   - GPT
   - chatgpt
   - gpt

3. **Claude相关** (2个词)
   - claude
   - Claude

4. **DeepSeek相关** (2个词)
   - deepseek
   - DeepSeek

5. **新能源汽车** (3个词)
   - 新能源汽车
   - 电动车
   - 新能源车

6. **手机** (2个词)
   - 手机
   - 智能手机

7. **芯片** (3个词)
   - 芯片
   - 半导体
   - 处理器

### ✅ 3. 内容整理呈现 (已优化)

系统现已提供以下信息展示：

#### 话题标题
- 清晰显示每个热点话题的标题
- 提供话题链接，可直接跳转到原文

#### 热度指数
系统通过多维度展示话题热度：
- **排名历史**: 显示话题在各平台的排名变化
- **出现频次**: 统计话题在监控期间出现的次数
- **持续时间**: 显示从首次出现到最后出现的时间跨度
- **权重算法**: 综合排名(60%)、频次(30%)、热度(10%)计算综合权重

#### 核心讨论点
- **平台来源**: 标注话题来自哪个平台（微博/贴吧/知乎/bilibili）
- **新增标记**: 用🆕标记新出现的热点话题
- **分类展示**: 按关键词组分类展示相关话题

#### 数据呈现格式
系统提供多种格式输出：
- **HTML网页版**: 精美的网页报告，支持移动端
- **推送通知**: 支持飞书、钉钉、企业微信、Telegram等多种渠道
- **历史数据**: 保存TXT和HTML格式的历史记录

## ⚠️ 技术限制说明

### 3. 热点评论提取功能 (受限)

**限制原因**:
当前系统使用的数据源是 [newsnow API](https://github.com/ourongxing/newsnow)，该API仅提供：
- 热点话题标题
- 话题排名
- 话题链接

**不提供**:
- 评论内容
- 评论数量
- 点赞数据
- 用户互动信息

**要实现评论提取功能，需要**:
1. **直接调用各平台API**
   - 微博API: 需要申请开发者账号和API密钥
   - 知乎API: 需要官方授权
   - 贴吧API: 百度开发者平台申请
   - Bilibili API: B站开发者平台申请
   
2. **网页爬取方案**
   - 可能违反各平台的服务条款
   - 需要处理反爬虫机制
   - 维护成本高，稳定性差

## 替代方案建议

由于评论提取的技术限制，建议采用以下替代方案：

### 方案一：链接跳转 (当前实现)
- ✅ 已实现：每个话题都提供原文链接
- 优势：用户可以直接跳转到平台查看完整评论
- 适用场景：需要快速了解热点，偶尔深入查看评论

### 方案二：增强热度分析 (当前实现)
- ✅ 已实现：提供排名历史、出现频次、持续时间等指标
- 优势：通过多维度数据判断话题热度和重要性
- 适用场景：关注话题趋势和热度变化

### 方案三：探索其他数据源 (需要调研)
- 可能的方案：
  - 寻找提供评论数据的第三方聚合API
  - 申请各平台的官方API访问权限
  - 使用专业的舆情监控服务
- 限制：可能涉及费用、申请流程复杂

## 当前系统特性

### 核心优势
1. **精准过滤**: 只关注指定的7个关键词领域
2. **多平台聚合**: 整合4个主流平台的热点
3. **智能排序**: 使用权重算法重新排序热点
4. **实时追踪**: 支持增量监控、当前榜单、当日汇总三种模式
5. **多渠道推送**: 支持6种以上的通知渠道
6. **历史分析**: 保留完整的历史数据便于回溯

### 使用建议
1. **快速浏览**: 通过HTML报告或移动端推送快速了解热点
2. **深入了解**: 点击感兴趣的话题链接，跳转到原平台查看详细内容和评论
3. **趋势分析**: 查看话题的持续时间和出现频次，判断话题的生命周期
4. **定时推送**: 配置推送时间窗口，在合适的时间接收推送

## 测试验证

配置文件已通过验证：
```bash
# 监控平台
✅ 4个平台配置正确：微博、贴吧、知乎、bilibili

# 关键词配置
✅ 7个关键词组配置正确
✅ 共20个关键词变体，覆盖所有要求的话题

# 配置格式
✅ YAML格式正确
✅ 关键词分组格式正确
```

## 下一步行动

### 如果接受当前实现
系统已可正常使用，建议：
1. 运行系统观察效果
2. 根据实际需要调整关键词
3. 配置合适的推送渠道

### 如果需要评论功能
需要进一步讨论：
1. 确定可接受的实现方案（API申请 vs 第三方服务 vs 其他）
2. 评估实施成本和维护成本
3. 考虑合规性和稳定性问题

## 总结

当前实现已完成了问题描述中的第1、2、4点要求，第3点（评论提取）因技术限制暂时无法实现。
系统已优化为专注于4个指定平台和7个关键词领域的热点追踪工具，可以有效帮助用户快速发现和追踪相关领域的热点话题。
